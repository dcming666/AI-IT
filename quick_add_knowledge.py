#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
å¿«é€Ÿæ·»åŠ çŸ¥è¯†åº“æ¡ç›®è„šæœ¬
"""

import os
from dotenv import load_dotenv
from db_utils import db_manager

def add_sample_knowledge():
    """æ·»åŠ ç¤ºä¾‹çŸ¥è¯†åº“æ¡ç›®"""
    
    # åŠ è½½ç¯å¢ƒå˜é‡
    load_dotenv()
    
    # ç¤ºä¾‹çŸ¥è¯†åº“æ•°æ®
    knowledge_items = [
        {
            "title": "æ‰“å°æœºæ— æ³•æ‰“å°è§£å†³æ–¹æ¡ˆ",
            "content": """
æ‰“å°æœºæ— æ³•æ‰“å°çš„å¸¸è§è§£å†³æ–¹æ³•ï¼š

1. æ£€æŸ¥ç”µæºå’Œè¿æ¥
   - ç¡®è®¤æ‰“å°æœºç”µæºå·²å¼€å¯
   - æ£€æŸ¥USBçº¿æˆ–ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
   - é‡å¯æ‰“å°æœº

2. æ£€æŸ¥é©±åŠ¨ç¨‹åº
   - ç¡®è®¤å·²å®‰è£…æ­£ç¡®çš„æ‰“å°æœºé©±åŠ¨
   - åœ¨è®¾å¤‡ç®¡ç†å™¨ä¸­æ£€æŸ¥æ‰“å°æœºçŠ¶æ€
   - é‡æ–°å®‰è£…é©±åŠ¨ç¨‹åº

3. æ£€æŸ¥æ‰“å°é˜Ÿåˆ—
   - æ‰“å¼€"è®¾å¤‡å’Œæ‰“å°æœº"
   - å³é”®ç‚¹å‡»æ‰“å°æœºï¼Œé€‰æ‹©"æŸ¥çœ‹æ‰“å°é˜Ÿåˆ—"
   - æ¸…é™¤æ‰€æœ‰å¾…æ‰“å°ä»»åŠ¡

4. æ£€æŸ¥çº¸å¼ å’Œå¢¨ç›’
   - ç¡®è®¤çº¸å¼ å……è¶³ä¸”æ­£ç¡®æ”¾ç½®
   - æ£€æŸ¥å¢¨ç›’æ˜¯å¦æœ‰å¢¨æ°´
   - æ¸…æ´æ‰“å°å¤´

5. é‡å¯æœåŠ¡
   - æŒ‰Win+Rï¼Œè¾“å…¥services.msc
   - æ‰¾åˆ°"Print Spooler"æœåŠ¡
   - é‡å¯è¯¥æœåŠ¡
            """,
            "category": "ç¡¬ä»¶é—®é¢˜"
        },
        {
            "title": "ç½‘ç»œè¿æ¥æ•…éšœæ’é™¤",
            "content": """
ç½‘ç»œè¿æ¥é—®é¢˜çš„æ’æŸ¥æ­¥éª¤ï¼š

1. åŸºç¡€æ£€æŸ¥
   - æ£€æŸ¥ç½‘çº¿æ˜¯å¦æ¾åŠ¨
   - ç¡®è®¤è·¯ç”±å™¨/äº¤æ¢æœºç”µæºæ­£å¸¸
   - æŸ¥çœ‹ç½‘ç»œé€‚é…å™¨çŠ¶æ€

2. ç½‘ç»œé…ç½®æ£€æŸ¥
   - æ£€æŸ¥IPåœ°å€é…ç½®
   - ç¡®è®¤DNSæœåŠ¡å™¨è®¾ç½®
   - è¿è¡Œipconfig /allæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯

3. ç½‘ç»œè¯Šæ–­
   - è¿è¡Œpingå‘½ä»¤æµ‹è¯•è¿é€šæ€§
   - ä½¿ç”¨tracertè¿½è¸ªè·¯ç”±
   - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

4. é‡å¯è®¾å¤‡
   - é‡å¯ç½‘ç»œé€‚é…å™¨
   - é‡å¯è·¯ç”±å™¨/äº¤æ¢æœº
   - é‡å¯è®¡ç®—æœº

5. è”ç³»ç½‘ç»œç®¡ç†å‘˜
   - å¦‚æœä»¥ä¸Šæ­¥éª¤æ— æ•ˆ
   - æä¾›é”™è¯¯ä¿¡æ¯å’Œè¯Šæ–­ç»“æœ
            """,
            "category": "ç½‘ç»œé—®é¢˜"
        },
        {
            "title": "è½¯ä»¶å®‰è£…å¤±è´¥å¤„ç†",
            "content": """
è½¯ä»¶å®‰è£…å¤±è´¥çš„è§£å†³æ–¹æ³•ï¼š

1. æƒé™æ£€æŸ¥
   - ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå®‰è£…ç¨‹åº
   - æ£€æŸ¥ç”¨æˆ·è´¦æˆ·æ§åˆ¶è®¾ç½®
   - ç¡®è®¤æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´

2. ç³»ç»Ÿè¦æ±‚æ£€æŸ¥
   - ç¡®è®¤æ“ä½œç³»ç»Ÿç‰ˆæœ¬å…¼å®¹
   - æ£€æŸ¥.NET Frameworkç‰ˆæœ¬
   - ç¡®è®¤ç³»ç»Ÿæ¶æ„åŒ¹é…ï¼ˆ32ä½/64ä½ï¼‰

3. æ¸…ç†ç¯å¢ƒ
   - å…³é—­æ€æ¯’è½¯ä»¶
   - æ¸…ç†ä¸´æ—¶æ–‡ä»¶
   - å¸è½½æ—§ç‰ˆæœ¬è½¯ä»¶

4. ä¸‹è½½å’Œå®‰è£…
   - ä»å®˜æ–¹ç½‘ç«™ä¸‹è½½æœ€æ–°ç‰ˆæœ¬
   - ä½¿ç”¨å…¼å®¹æ¨¡å¼å®‰è£…
   - æ£€æŸ¥å®‰è£…æ—¥å¿—æ–‡ä»¶

5. ç³»ç»Ÿä¿®å¤
   - è¿è¡Œç³»ç»Ÿæ–‡ä»¶æ£€æŸ¥å™¨
   - ä¿®å¤Windowsæ›´æ–°
   - é‡ç½®ç³»ç»Ÿè®¾ç½®
            """,
            "category": "è½¯ä»¶å®‰è£…"
        },
        {
            "title": "é‚®ç®±é…ç½®æŒ‡å—",
            "content": """
é‚®ç®±å®¢æˆ·ç«¯é…ç½®æ­¥éª¤ï¼š

1. è·å–é‚®ç®±ä¿¡æ¯
   - é‚®ç®±åœ°å€å’Œå¯†ç 
   - æœåŠ¡å™¨åœ°å€ï¼ˆSMTP/POP3/IMAPï¼‰
   - ç«¯å£å·å’Œå®‰å…¨è®¾ç½®

2. Outlooké…ç½®
   - æ‰“å¼€Outlook
   - æ–‡ä»¶ -> æ·»åŠ è´¦æˆ·
   - è¾“å…¥é‚®ç®±åœ°å€å’Œå¯†ç 
   - é€‰æ‹©è´¦æˆ·ç±»å‹

3. æœåŠ¡å™¨è®¾ç½®
   - SMTPæœåŠ¡å™¨ï¼šç”¨äºå‘é€é‚®ä»¶
   - POP3/IMAPæœåŠ¡å™¨ï¼šç”¨äºæ¥æ”¶é‚®ä»¶
   - å¯ç”¨SSL/TLSåŠ å¯†

4. æµ‹è¯•è¿æ¥
   - å‘é€æµ‹è¯•é‚®ä»¶
   - æ£€æŸ¥æ¥æ”¶æ˜¯å¦æ­£å¸¸
   - ç¡®è®¤åŒæ­¥è®¾ç½®

5. å¸¸è§é—®é¢˜
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - ç¡®è®¤æœåŠ¡å™¨åœ°å€æ­£ç¡®
   - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
            """,
            "category": "é‚®ç®±é…ç½®"
        },
        {
            "title": "ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–",
            "content": """
Windowsç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–æ–¹æ³•ï¼š

1. å¯åŠ¨é¡¹ç®¡ç†
   - æŒ‰Ctrl+Shift+Escæ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨
   - é€‰æ‹©"å¯åŠ¨"æ ‡ç­¾
   - ç¦ç”¨ä¸å¿…è¦çš„å¯åŠ¨é¡¹

2. ç£ç›˜æ¸…ç†
   - è¿è¡Œç£ç›˜æ¸…ç†å·¥å…·
   - åˆ é™¤ä¸´æ—¶æ–‡ä»¶å’Œä¸‹è½½ç¼“å­˜
   - æ¸…ç©ºå›æ”¶ç«™

3. ç³»ç»Ÿç»´æŠ¤
   - è¿è¡Œç£ç›˜ç¢ç‰‡æ•´ç†
   - æ£€æŸ¥ç£ç›˜é”™è¯¯
   - æ›´æ–°ç³»ç»Ÿè¡¥ä¸

4. å†…å­˜ä¼˜åŒ–
   - å…³é—­ä¸å¿…è¦çš„ç¨‹åº
   - å¢åŠ è™šæ‹Ÿå†…å­˜
   - ä½¿ç”¨å†…å­˜ä¼˜åŒ–å·¥å…·

5. å®šæœŸç»´æŠ¤
   - æ¯å‘¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶
   - æ¯æœˆæ£€æŸ¥ç³»ç»Ÿæ›´æ–°
   - å®šæœŸå¤‡ä»½é‡è¦æ•°æ®
            """,
            "category": "ç³»ç»Ÿä¼˜åŒ–"
        }
    ]
    
    print("ğŸš€ å¼€å§‹æ·»åŠ çŸ¥è¯†åº“æ¡ç›®...")
    
    for i, item in enumerate(knowledge_items, 1):
        try:
            knowledge_id = db_manager.add_knowledge_item(
                title=item["title"],
                content=item["content"],
                category=item["category"]
            )
            print(f"âœ… [{i}/{len(knowledge_items)}] æ·»åŠ æˆåŠŸ: {item['title']}")
        except Exception as e:
            print(f"âŒ [{i}/{len(knowledge_items)}] æ·»åŠ å¤±è´¥: {item['title']} - {e}")
    
    print(f"\nğŸ‰ çŸ¥è¯†åº“æ·»åŠ å®Œæˆï¼å…±æ·»åŠ  {len(knowledge_items)} ä¸ªæ¡ç›®")
    
    # æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
    try:
        stats = db_manager.get_interaction_stats()
        print(f"ğŸ“Š å½“å‰çŸ¥è¯†åº“æ¡ç›®æ•°: {stats.get('knowledge_count', 0)}")
    except Exception as e:
        print(f"âš ï¸  æ— æ³•è·å–ç»Ÿè®¡ä¿¡æ¯: {e}")

if __name__ == "__main__":
    add_sample_knowledge()
